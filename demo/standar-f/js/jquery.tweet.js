(function(c){"function"===typeof define&&define.amd?define(["jquery"],c):c(jQuery)})(function(c){c.fn.tweet=function(m){function g(a,e){if("string"===typeof a){var c=a,h;for(h in e)var f=e[h],c=c.replace(RegExp("{"+h+"}","g"),null===f?"":f);return c}return a(e)}function j(a,e){return function(){var i=[];this.each(function(){i.push(this.replace(a,e))});return c(i)}}function n(a,e){return a.replace(k,function(a){for(var d=/^[a-z]+:/i.test(a)?a:"http://"+a,c=0;c<e.length;++c){var b=e[c];if(b.url==d&&
b.expanded_url){d=b.expanded_url;a=b.display_url;break}}return'<a href="'+d.replace(/</g,"&lt;").replace(/>/g,"^&gt;")+'">'+a.replace(/</g,"&lt;").replace(/>/g,"^&gt;")+"</a>"})}function o(){var d="https:"==document.location.protocol?"https:":"http:",e=null===a.fetch?a.count:a.fetch;if(a.list)return d+"//"+a.twitter_api_url+"/1/"+a.username[0]+"/lists/"+a.list+"/statuses.json?page="+a.page+"&per_page="+e+"&include_entities=1&callback=?";if(a.favorites)return d+"//"+a.twitter_api_url+"/favorites/"+
a.username[0]+".json?page="+a.page+"&count="+e+"&include_entities=1&callback=?";if(null===a.query&&1==a.username.length)return d+"//"+a.twitter_api_url+"/1/statuses/user_timeline.json?screen_name="+a.username[0]+"&count="+e+(a.retweets?"&include_rts=1":"")+"&page="+a.page+"&include_entities=1&callback=?";var c=a.query||"from:"+a.username.join(" OR from:");return d+"//"+a.twitter_search_url+"/search.json?&q="+encodeURIComponent(c)+"&rpp="+e+"&page="+a.page+"&include_entities=1&callback=?"}function l(a,
c){return c?"user"in a?a.user.profile_image_url_https:l(a,!1).replace(/^http:\/\/[a-z0-9]{1,3}\.twimg\.com\//,"https://s3.amazonaws.com/twitter_production/"):a.profile_image_url||a.user.profile_image_url}function p(d){var e,i,h,f,b={};b.item=d;b.source=d.source;b.screen_name=d.from_user||d.user.screen_name;b.name=d.from_user_name||d.user.name;b.avatar_size=a.avatar_size;b.avatar_url=l(d,"https:"===document.location.protocol);b.retweet="undefined"!=typeof d.retweeted_status;b.tweet_time=Date.parse(d.created_at.replace(/^([a-z]{3})( [a-z]{3} \d\d?)(.*)( \d{4})$/i,
"$1,$2$4$3"));b.join_text="auto"==a.join_text?d.text.match(/^(@([A-Za-z0-9-_]+)) .*/i)?a.auto_join_text_reply:d.text.match(k)?a.auto_join_text_url:d.text.match(/^((\w+ed)|just) .*/im)?a.auto_join_text_ed:d.text.match(/^(\w*ing) .*/i)?a.auto_join_text_ing:a.auto_join_text_default:a.join_text;b.tweet_id=d.id_str;b.twitter_base="http://"+a.twitter_url+"/";b.user_url=b.twitter_base+b.screen_name;b.tweet_url=b.user_url+"/status/"+b.tweet_id;b.reply_url=b.twitter_base+"intent/tweet?in_reply_to="+b.tweet_id;
b.retweet_url=b.twitter_base+"intent/retweet?tweet_id="+b.tweet_id;b.favorite_url=b.twitter_base+"intent/favorite?tweet_id="+b.tweet_id;b.retweeted_screen_name=b.retweet&&d.retweeted_status.user.screen_name;e=b.tweet_time;e=((new Date).getTime()-e)/1E3;f=parseInt(e,10);1>f&&(f=0);e=parseInt(f/86400,10);i=parseInt(f/3600,10);h=parseInt(f/60,10);f=parseInt(f,10);b.tweet_relative_time=2<e?"about "+e+" days ago":24<i?"about a day ago":2<i?"about "+i+" hours ago":45<h?"about an hour ago":2<h?"about "+
h+" minutes ago":1<f?"about "+f+" seconds ago":"just now";b.entities=d.entities?(d.entities.urls||[]).concat(d.entities.media||[]):[];b.tweet_raw_text=b.retweet?"RT @"+b.retweeted_screen_name+" "+d.retweeted_status.text:d.text;b.tweet_text=c([n(b.tweet_raw_text,b.entities)]).linkUser().linkHash()[0];b.tweet_text_fancy=c([b.tweet_text]).makeHeart()[0];b.user=g('<a class="tweet_user" href="{user_url}">{screen_name}</a>',b);b.join=a.join_text?g(' <span class="tweet_join">{join_text}</span> ',b):" ";
b.avatar=b.avatar_size?g('<a class="tweet_avatar" href="{user_url}"><img src="{avatar_url}" height="{avatar_size}" width="{avatar_size}" alt="{screen_name}\'s avatar" title="{screen_name}\'s avatar" border="0"/></a>',b):"";b.time=g('<span class="tweet_time"><a href="{tweet_url}" title="view tweet on twitter">{tweet_relative_time}</a></span>',b);b.text=g('<span class="tweet_text">{tweet_text_fancy}</span>',b);b.reply_action=g('<a class="tweet_action tweet_reply" href="{reply_url}">reply</a>',b);b.retweet_action=
g('<a class="tweet_action tweet_retweet" href="{retweet_url}">retweet</a>',b);b.favorite_action=g('<a class="tweet_action tweet_favorite" href="{favorite_url}">favorite</a>',b);return b}function q(d){var e='<p class="tweet_intro">'+a.intro_text+"</p>",i='<p class="tweet_outro">'+a.outro_text+"</p>",h=c('<p class="loading">'+a.loading_text+"</p>");a.loading_text&&c(d).not(":has(.tweet_list)").empty().append(h);c.getJSON(o(),function(f){var b=c('<ul class="tweet_list">'),f=c.map(f.results||f,p),f=c.grep(f,
a.filter).sort(a.comparator).slice(0,a.count);b.append(c.map(f,function(b){return"<li>"+g(a.template,b)+"</li>"}).join("")).children("li:first").addClass("tweet_first").end().children("li:odd").addClass("tweet_even").end().children("li:even").addClass("tweet_odd");c(d).empty().append(b);a.intro_text&&b.before(e);a.outro_text&&b.after(i);c(d).trigger("loaded").trigger(0===f.length?"empty":"full");a.refresh_interval&&window.setTimeout(function(){c(d).trigger("tweet:load")},1E3*a.refresh_interval)})}
var a=c.extend({username:null,list:null,favorites:!1,query:null,avatar_size:null,count:3,fetch:null,page:1,retweets:!0,intro_text:null,outro_text:null,join_text:null,auto_join_text_default:"I said,",auto_join_text_ed:"I",auto_join_text_ing:"I am",auto_join_text_reply:"I replied to",auto_join_text_url:"I was looking at",loading_text:null,refresh_interval:null,twitter_url:"twitter.com",twitter_api_url:"api.twitter.com",twitter_search_url:"search.twitter.com",template:"{avatar}{time}{join}{text}",comparator:function(a,
c){return c.tweet_time-a.tweet_time},filter:function(){return!0}},m),k=/\b((?:https?:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/gi;c.extend({tweet:{t:g}});c.fn.extend({linkUser:j(/(^|[\W])@(\w+)/gi,'$1<span class="at">@</span><a href="http://'+a.twitter_url+'/$2">$2</a>'),linkHash:j(/(?:^| )[\#]+([\w\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0600-\u06ff]+)/gi,
' <a href="http://'+a.twitter_search_url+"/search?q=&tag=$1&lang=all"+(a.username&&1==a.username.length&&!a.list?"&from="+a.username.join("%2BOR%2B"):"")+'" class="tweet_hashtag">#$1</a>'),makeHeart:j(/(&lt;)+[3]/gi,"<tt class='heart'>&#x2665;</tt>")});return this.each(function(d,e){a.username&&"string"==typeof a.username&&(a.username=[a.username]);c(e).unbind("tweet:load").bind("tweet:load",function(){q(e)}).trigger("tweet:load")})}});